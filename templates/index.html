{% extends "base.html" %} {% block title %}Contacts{% endblock %} {% block
content %}
<!-- Mobile menu toggle button -->
<button
  id="mobileMenuToggle"
  class="lg:hidden fixed top-4 left-4 z-50 p-3 bg-primary text-primary-foreground rounded-lg shadow-lg hover:bg-primary/90 transition-colors hover:cursor-pointer"
  aria-label="Toggle contacts menu"
>
  <i class="fa fa-bars text-xl"></i>
</button>

<!-- Mobile overlay -->
<div
  id="mobileOverlay"
  class="fixed inset-0 bg-black/50 lg:hidden hidden z-40"
></div>

<div class="flex h-screen">
  <!-- Left panel -->
  <aside
    id="contactsSidebar"
    class="fixed lg:static inset-y-0 left-0 w-80 lg:w-90 bg-sidebar space-y-4 border-r h-screen overflow-y-auto flex flex-col transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-40"
  >
    <div class="px-8 py-6 border-b border-border">
      <h2 class="text-2xl font-semibold text-sidebar-foreground">
        All Contacts
      </h2>
    </div>
    {% from "contact_item.html" import contact_item %}
    <ul id="contactsList" class="space-y-1 px-6">
      {% for contact in contacts %} {{ contact_item(contact) }} {% endfor %}
    </ul>
  </aside>

  <!-- Main panel -->
  <div class="flex flex-col justify-between h-full w-full p-6 pt-20 lg:pt-6">
    <!-- Main content -->
    <div>
      <!-- Welcome Section -->
      <div id="welcomeSection" class="mb-6 max-w-md w-full">
        <h1 class="text-3xl font-bold text-foreground mb-2">Welcome!</h1>
        <p class="text-muted-foreground">
          Select a contact from the list to view details or add a new contact
          using the button below.
        </p>
      </div>
      <!-- Contact Details Section -->
      <div
        id="contactDetails"
        class="p-4 bg-card rounded-lg border border-border hidden relative max-w-md w-full"
        data-contact-id=""
      >
        <!-- Edit/Save/Cancel buttons -->
        <div id="editButtons" class="absolute top-4 right-4">
          <button
            id="editContactBtn"
            class="w-10 h-10 btn btn-outline btn-sm"
            title="Edit Contact"
          >
            <i class="fa fa-pencil text-sm"></i>
          </button>
        </div>
        <div id="saveButtons" class="absolute top-4 right-4 hidden space-x-2">
          <button
            id="saveContactBtn"
            class="btn btn-primary btn-sm"
            title="Save Changes"
          >
            <i class="fa fa-check text-sm"></i>
          </button>
          <button
            id="cancelEditBtn"
            class="btn btn-outline btn-sm"
            title="Cancel"
          >
            <i class="fa fa-times text-sm"></i>
          </button>
        </div>

        <h3 class="text-lg font-semibold text-foreground mb-4">
          Contact Details
        </h3>
        <div id="displayFields" class="space-y-3">
          <div>
            <p class="text-sm text-muted-foreground">Name</p>
            <p id="detailName" class="text-foreground font-medium"></p>
          </div>
          <div>
            <p class="text-sm text-muted-foreground">Phone</p>
            <p id="detailPhone" class="text-foreground font-medium"></p>
          </div>
          <div>
            <p class="text-sm text-muted-foreground">Emails</p>
            <div id="detailEmails" class="space-y-1"></div>
          </div>
          <div>
            <p class="text-sm text-muted-foreground">Created</p>
            <p
              id="detailCreated"
              class="text-foreground font-medium text-sm"
            ></p>
          </div>
        </div>
        <div id="editEmails" class="hidden"></div>
        <!-- Delete Contact Link -->
        <div
          id="deleteContactSection"
          class="hidden mt-4 pt-4 border-t border-border"
        >
          <button
            id="deleteContactBtn"
            class="text-sm text-red-600 hover:text-red-800 flex items-center gap-1 cursor-pointer"
          >
            <i class="fa fa-trash"></i> Delete Contact
          </button>
        </div>
      </div>
    </div>

    <!-- Buttons -->
    <div>
      <!-- <button id="openAddContact" class="btn btn-primary">Add Contact</button> -->
      <button
        id="openAddContact"
        class="btn btn-primary fixed bottom-6 right-6 w-10 h-10 rounded-full text-2xl flex items-center justify-center shadow-lg hover:cursor-pointer transition z-50"
        title="Add Contact"
      >
        <i class="fa fa-plus"></i>
      </button>
    </div>
  </div>
</div>

{% include "modals.html" %}

<script
  type="module"
  src="{{ url_for('static', filename='js/index.js') }}"
></script>
{% endblock %}
